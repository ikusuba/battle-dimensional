;------------------------------------------------------------------
;Slash Sabre
[Statedef 3000]
type=S
movetype=A
physics=N
anim=3000
poweradd=-1000
ctrl=0
velset=0,0
sprpriority=2
facep2=1

[State 3000, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3000, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=49
[State 3000, Super Cancel Flag]
type=VarSet
trigger1=!time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3000, Hyper Cancel Flag]
type=VarSet
trigger1=!time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3000, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(time % 2) && time <=12
time=1
add=255,255,255
ignoreHitPause=1

[State 3000, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause =1

[State 3000, SuperPause FX]
type=Helper
trigger1=!time
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=0,-90
superMoveTime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3000, SuperPause]
type=SuperPause
trigger1=!time
time=50
movetime=49
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,0
darken=0
poweradd=0

[State 3000, NotHitBy]
type=NotHitBy
trigger1=animelemtime(6) < 0
time=1
value=SCA

[State 3000, Starting Step snd]
type=PlaySnd
trigger1=animelem=4
value=102, 0
channel=5
[State 3000, Step snd]
type=PlaySnd
trigger1=AnimElem=7|| AnimElem=11
value=100,Ifelse((AnimElem=7),1,0)
channel=5

[State 3000, Dust]
type = explod
trigger1 = animelem=5
anim = 3090
sprpriority = 5
postype = p1
pos = 0,5
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1

[State 3000, Width]
type=Width
trigger1=animelem=4
value=30,0
ignorehitpause =1

[State 3000, Velocity]
type=VelSet
trigger1=AnimElem=5
x=12

[State 3000, Changestate]
type=ChangeState
triggerall=numenemy
triggerall=animelemtime(5)>1
trigger1=p2bodydist X < 100
value=3020
ctrl=0
[State 3000, End]
type=ChangeState
trigger1=time>=70
value=1110
ctrl=0
;------------------------------------------------------------------
;Slash Sabre-Success
[Statedef 3001]
type=S
movetype=A
physics=N
velset=0,0
anim=9999
ctrl=0
sprpriority=1

[State 3001, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noautoturn
[State 3001, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
value = 0
ctrl = 1
[State 3001, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time=1||time=21||time=41||time=61
value = 3026
[State 3001, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time=11||time=31||time=51
value = 3025

[State 3001, ChangeAnim]
type = ChangeAnim
trigger1 = time=61
value = 3004

[State 3001, TargetState]
type = TargetState
trigger1 = anim=3004 && animelem = 1
value = 3127
[State 3001, TargetState]
type = TargetState
trigger1 = anim=3004 && animelem = 14
value = 3027

[State 3001, playerpush]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause=1

[State 3001, Posset]
type = posset
triggerall = NumTarget
trigger1 = time = 1
x = target,pos x 

[State 3001, HitAdd]
type = HitAdd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71
trigger2 = anim=3004 && animelem = 14
value = 1
[State 3001, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61
value = floor(-20*fvar(10))
kill = 0
[State 3001, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = anim=3004 && animelem = 14
value = floor(-100*fvar(10))
absolute = 1

[State 3001, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 3001, EnvShake]
type = EnvShake
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61
time = 9
freq = 60
ampl = Ifelse(random<500,5,-5)
[State 3001, EnvShake]
type = EnvShake
trigger1 = anim=3004 && animelem = 14
time = 15
freq = 60
ampl = Ifelse(random<500,6,-6)

[State 3001, HitSpark]
type=Helper
trigger1 = time=16||time=26||time=36||time=46||time=56||time=66||time=76
helperType=Normal
stateNo=8017
ID=8000
name="Spark"
posType=P1
pos = ceil(10*const(size.xscale)),-60
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
[State 3001, HitSpark]
type=Helper
trigger1 = anim=3004 && animelem = 14
helperType=Normal
stateNo=8014
ID=8000
name="Spark"
posType=P1
pos = ceil(10*const(size.xscale)),-80
facing=-1
ownPal=1
size.xScale=1
size.yScale=1

[State 3001, Dust]
type = explod
trigger1 = time=1||time=21||time=41
anim = 3090
sprpriority = 5
postype = p1
pos = -10,5
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=ifelse(facing=1,1,-1)
[State 3001, Dust]
type = explod
trigger1 = time=11||time=31||time=51
anim = 3090
sprpriority = 5
postype = p1
pos = 10,5
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=ifelse(facing=1,-1,1)

[State 3001, Leona FX]
type = explod
trigger1 = time=1||time=21||time=41
anim = 3001
sprpriority = 3
postype = p1
pos = 90,0
ownpal = 1
ignorehitpause = 1
facing=-1
[State 3001, Leona FX]
type = explod
trigger1 = time=11||time=31||time=51
anim = 3001
sprpriority = 3
postype = p1
pos = -90,0
ownpal = 1
ignorehitpause = 1
facing=1

[State 3001, Sabre FX]
type = explod
trigger1 = time=21||time=41||time=61
anim = 3002
sprpriority = 4
postype = p1
pos = 40,0
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=-1
[State 3001, Sabre FX]
type = explod
trigger1 = time=11||time=31||time=51
anim = 3002
sprpriority = 4
postype = p1
pos = -40,0
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=1

[State 3001, Snd]
type=PlaySnd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61
value=1100,0
channel=2
[State 3001, Snd]
type=PlaySnd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61
value=2+10*var(44),14
channel=3

[State 3001, Step snd]
type = PlaySnd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61
value = 100,0
channel = 4

[State 3001, Step snd]
type = PlaySnd
trigger1 = anim=3004 && animelem = 14
value = 1400,3
channel = 5

[State 3001, X-plosion]
type = Explod
trigger1 = anim=3004 && animelemtime(14)>=0 && animelemtime(17)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=4
posType = P1
pos = Ifelse(random<500,-10+random%70,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.125,0.125
ownpal = 1
[State 3001, X-plosion]
type = Explod
trigger1 = anim=3004 && animelemtime(14)>=0 && animelemtime(17)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=3
posType = P1
pos = Ifelse(random<500,-20+random%60,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.25,0.25
ownpal = 1
[State 3001, X-plosion]
type = Explod
trigger1 = anim=3004 && animelemtime(14)=3
anim = 1420
sprPriority=6
posType = P1
pos = 20,-55
vel = 0,0
scale = 0.5,0.5
ownpal = 1

[State 3001, flames]
type = helper
trigger1 = numtarget && !numhelper(7180)
trigger1 = anim=3004 && animelemtime(14)=5
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 3001, TargetPowerAdd]
type=TargetPowerAdd
trigger1=NumTarget && AnimElem=14
value=288
[State 3001, VarAdd]
type=VarAdd
trigger1 = time=11
trigger2 = anim=3004 && animelem = 14
var(13)=1
[State 3001, Juggle]
type=VarAdd
trigger1=NumTarget && AnimElem=14
var(15)=1
ignoreHitPause=1
[State 3001, Juggle]
type=VarSet
trigger1=NumTarget && AnimElem=14
var(16)=1
ignoreHitPause=1

[State 3001, End]
type=ChangeState
trigger1= anim = 3004 && !animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Slash Sabre Attack
[Statedef 3020]
type=S
movetype=A
physics=N
anim=3020
ctrl=0

[State 3020, Voice]
type=PlaySnd
trigger1 =animelem=9
value=0,2+random%3
channel=0
[State 3020, Snd]
type=PlaySnd
trigger1 =animelem=2
value=1100,0
channel=1
[State 3020, Move Snd]
type=PlaySnd
trigger1=Animelem=4
value=1,2
channel=2
[State 3020, Width]
type=Width
trigger1=!time
edge=30,0
ignorehitpause =1

[State 3020, Skid Dust]
type=Explod
trigger1=animelem=16
anim=8104
sprPriority=3
posType=P1
pos=32,0
scale=0.5,0.5
ownpal=1
[State 3020, Skid Snd]
type=PlaySnd
trigger1=animelem=16
value=101,0
channel=5

[State 3020, VelMul]
type=VelMul
trigger1=animelemtime(13)<0 
x=0.9

[State 3020, Grand Sabre]
type=Helper
trigger1=animelemtime(2)=0
helpertype=normal
name="SabreFX"
stateno=3005
ID=3005
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ignorehitpause=1

[State 3020, Hit]
type=HitDef
trigger1 = !time
id=3020
attr=S, HA
hitflag=MAF
guardflag=M
damage=0,42
priority=5, hit
animtype=Hard
getpower=0,0
givepower=144,72
kill=0
hitsound=s2+10*var(44),14
guardsound=S130,1
pauseTime=1,1
guard.pauseTime=12,12
sparkNo=-1 + 0 * (var(33) :=8017)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=65), var(36) :=-71
ground.type=High
ground.slidetime=1
ground.hittime =32
guard.hittime=12
ground.velocity=0
air.velocity=0,-2
guard.velocity=-3
airguard.velocity=-2, -2
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.5
air.fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p1sprpriority=0

[State 3020, p2state]
type=targetstate
trigger1= movehit && numtarget(3020)
trigger1= target(3020),Movetype=H
ID=3020
value=3025
ignorehitpause=1
persistent=0
[State 3020, p1state]
type=changestate
trigger1= movehit && numtarget(3020)
trigger1= target(3020),Movetype=H
value=3001
ignorehitpause=1
persistent=0

[State 3020, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(12) = 0
moveType=I

[State 3020, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1

;------------------------------------------------------------------
;Max Slash Sabre
[Statedef 3050]
type=S
movetype=A
physics=N
anim=3050
poweradd=-2000
ctrl=0
velset=0,0
sprpriority=2
facep2=1

[State 3050, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3050, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=49
[State 3050, Super Cancel Flag]
type=VarSet
trigger1=!time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3050, Hyper Cancel Flag]
type=VarSet
trigger1=!time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3050, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(time % 2) && time <=12
time=1
add=255,255,255
ignoreHitPause=1

[State 3050, SuperPause FX]
type=Helper
trigger1=!time
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=0,-90
superMoveTime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3050, SuperPause]
type=SuperPause
trigger1=!time
time=50
movetime=49
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,1
darken=0
poweradd=0

[State 3050, NotHitBy]
type=NotHitBy
trigger1=animelemtime(9) < 0
time=1
value=SCA
[State 3000, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause =1

[State 3050, Starting Step snd]
type=PlaySnd
trigger1=animelem=4
value=102, 0
channel=5
[State 3050, Step snd]
type=PlaySnd
trigger1=AnimElem=7|| AnimElem=11
value=100,Ifelse((AnimElem=7),1,0)
channel=5

[State 3050, Dust]
type = explod
trigger1 = animelem=5
anim = 3090
sprpriority = 5
postype = p1
pos = 0,5
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1

[State 3050, Width]
type=Width
trigger1=animelem=4
value=30,0
ignorehitpause =1

[State 3050, Velocity]
type=VelSet
trigger1=AnimElem=5
x=12

[State 3050, Changestate]
type=ChangeState
triggerall=numenemy
triggerall=animelemtime(5)>1
trigger1=p2bodydist X < 120
value=3070
ctrl=0
[State 3050, End]
type=ChangeState
trigger1=time>=90
value=1110
ctrl=0
;------------------------------------------------------------------
;Max Slash Sabre-Success
[Statedef 3051]
type=S
movetype=A
physics=N
velset=0,0
anim=9999
ctrl=0
sprpriority=1

[State 3051, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noautoturn
[State 3051, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
value = 0
ctrl = 1
[State 3051, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time=1||time=21||time=41||time=61||time=81||time=101
value = 3026
[State 3051, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time=11||time=31||time=51||time=71||time=91||time=111
value = 3025

[State 3051, ChangeAnim]
type = ChangeAnim
trigger1 = time=120
value = 3014

[State 3001, TargetState]
type = TargetState
trigger1 = anim=3014 && animelem = 1
value = 3127
[State 3051, TargetState]
type = TargetState
trigger1 = anim=3014 && animelem = 14
value = 3027

[State 3051, playerpush]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause=1

[State 3051, Posset]
type = posset
triggerall = NumTarget
trigger1 = time = 1
x = target,pos x + 20

[State 3051, HitAdd]
type = HitAdd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71||time=81||time=91||time=101||time=111
trigger2 = anim=3014 && animelem = 14
value = 1
[State 3051, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71||time=81||time=91||time=101||time=111
value = floor(-20*fvar(10))
kill = 0
[State 3051, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = anim=3014 && animelem = 14
value = floor(-100*fvar(10))
absolute = 1

[State 3051, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 3051, EnvShake]
type = EnvShake
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71||time=81||time=91||time=101||time=111
time = 9
freq = 60
ampl = Ifelse(random<500,5,-5)
[State 3051, EnvShake]
type = EnvShake
trigger1 = anim=3014 && animelem = 14
time = 15
freq = 60
ampl = Ifelse(random<500,6,-6)

[State 3051, HitSpark]
type=Helper
trigger1 = time=16||time=26||time=36||time=46||time=56||time=66||time=76||time=86||time=96||time=106||time=116
helperType=Normal
stateNo=8017
ID=8000
name="Spark"
posType=P1
pos = ceil(0*const(size.xscale)),-60
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
[State 3051, HitSpark]
type=Helper
trigger1 = anim=3014 && animelem = 14
helperType=Normal
stateNo=8014
ID=8000
name="Spark"
posType=P1
pos = ceil(0*const(size.xscale)),-80
facing=-1
ownPal=1
size.xScale=1
size.yScale=1

[State 3051, Dust]
type = explod
trigger1 = time=1||time=21||time=41||time=61||time=81||time=101
anim = 3090
sprpriority = 5
postype = p1
pos = -20,5
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=ifelse(facing=1,1,-1)
[State 3051, Dust]
type = explod
trigger1 = time=11||time=31||time=51||time=71||time=91||time=111
anim = 3090
sprpriority = 5
postype = p1
pos = 20,5
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=ifelse(facing=1,-1,1)

[State 3051, Leona FX]
type = explod
trigger1 = time=1||time=21||time=41||time=61||time=81||time=101
anim = 3051
sprpriority = 3
postype = p1
pos = 90,0
ownpal = 1
ignorehitpause = 1
facing=-1
[State 3051, Leona FX]
type = explod
trigger1 = time=11||time=31||time=51||time=71||time=91||time=111
anim = 3051
sprpriority = 3
postype = p1
pos = -90,0
ownpal = 1
ignorehitpause = 1
facing=1

[State 3051, Sabre FX]
type = explod
trigger1 = time=1||time=21||time=41||time=61||time=81||time=101
anim = 3002
sprpriority = 5
postype = p1
pos = 40,0
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=-1
[State 3051, Sabre FX]
type = explod
trigger1 = time=11||time=31||time=51||time=71||time=91||time=111
anim = 3002
sprpriority = 5
postype = p1
pos = -40,0
scale = 0.5, 0.5
ownpal = 1
ignorehitpause = 1
facing=1

[State 3051, Snd]
type=PlaySnd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71||time=81||time=91||time=101||time=111
value=1100,0
channel=2
[State 3051, Snd]
type=PlaySnd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71||time=81||time=91||time=101||time=111
value=2+10*var(44),14
channel=3

[State 3051, Step snd]
type = PlaySnd
trigger1 = time=11||time=21||time=31||time=41||time=51||time=61||time=71||time=81||time=91||time=101||time=111
value = 100,0
channel = 4

[State 3051, Step snd]
type = PlaySnd
trigger1 = anim=3014 && animelem = 14
value = 1400,3
channel = 5

[State 3051, X-plosion]
type = Explod
trigger1 = anim=3014 && animelemtime(14)>=0 && animelemtime(17)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=4
posType = P1
pos = Ifelse(random<500,-40+random%40,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.125,0.125
ownpal = 1
[State 3051, X-plosion]
type = Explod
trigger1 = anim=3014 && animelemtime(14)>=0 && animelemtime(17)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=5
posType = P1
pos = Ifelse(random<500,-40+random%40,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.25,0.25
ownpal = 1
[State 3051, X-plosion]
type = Explod
trigger1 = anim=3014 && animelem = 14
anim = 1420
sprPriority=6
posType = P1
pos = -10,-35
vel = 0,0
scale = 0.5,0.5
ownpal = 1

[State 3051, flames]
type = helper
trigger1 = numtarget && !numhelper(7180)
trigger1 = anim = 3014 && animelem = 14
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 3051, TargetPowerAdd]
type=TargetPowerAdd
trigger1=NumTarget && AnimElem=14
value=288
[State 3051, VarAdd]
type=VarAdd
trigger1 = time=11
trigger2 = anim=3014 && animelem = 14
var(13)=1
[State 3051, Juggle]
type=VarAdd
trigger1=NumTarget && AnimElem=14
var(15)=1
ignoreHitPause=1
[State 3051, Juggle]
type=VarSet
trigger1=NumTarget && AnimElem=14
var(16)=1
ignoreHitPause=1

[State 3051, End]
type=ChangeState
trigger1= anim = 3014 && !animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Max Slash Sabre Attack
[Statedef 3070]
type=S
movetype=A
physics=N
anim=3070
ctrl=0

[State 3070, NotHitBy]
type=NotHitBy
trigger1=animelemtime(11) < 0
time=1
value=SCA
[State 3070, Voice]
type=PlaySnd
trigger1 =animelem=9
value=0,2+random%3
channel=0
[State 3070, Snd]
type=PlaySnd
trigger1 =animelem=2
value=1100,0
channel=1
[State 3070, Move Snd]
type=PlaySnd
trigger1=Animelem=4
value=1,2
channel=2
[State 3070, Width]
type=Width
trigger1=!time
edge=30,0
ignorehitpause =1

[State 3070, Skid Dust]
type=Explod
trigger1=animelem=16
anim=8104
sprPriority=3
posType=P1
pos=32,0
scale=0.5,0.5
ownpal=1
[State 3070, Skid Snd]
type=PlaySnd
trigger1=animelem=16
value=101,0
channel=5

[State 3070, VelMul]
type=VelMul
trigger1=animelemtime(13)<0 
x=0.9

[State 3070, Grand Sabre]
type=Helper
trigger1=animelemtime(2)=0
helpertype=normal
name="SabreFX"
stateno=3005
ID=3005
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ignorehitpause=1

[State 3070, Hit]
type=HitDef
trigger1 = !time
id=3070
attr=S, HA
hitflag=MAF
guardflag=M
damage=0,42
priority=5, hit
animtype=Hard
getpower=0,0
givepower=144,72
kill=0
hitsound=s2+10*var(44),14
guardsound=S130,1
pauseTime=1,1
guard.pauseTime=12,12
sparkNo=-1 + 0 * (var(33) :=8017)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=65), var(36) :=-71
ground.type=High
ground.slidetime=1
ground.hittime =32
guard.hittime=12
ground.velocity=0
air.velocity=0,-2
guard.velocity=-3
airguard.velocity=-2, -2
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.5
air.fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p1sprpriority=0

[State 3070, p2state]
type=targetstate
trigger1= movehit && numtarget(3070)
trigger1= target(3070),Movetype=H
ID=3070
value=3025
ignorehitpause=1
persistent=0
[State 3070, p1state]
type=changestate
trigger1= movehit && numtarget(3070)
trigger1= target(3070),Movetype=H
value=3051
ignorehitpause=1
persistent=0

[State 3070, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(12) = 0
moveType=I

[State 3070, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;----------------------------------------------------------------------
;V-Slasher
[Statedef 3100]
type=A
movetype=A
physics=N
anim=3100
poweradd=-1000
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3100, VarSet]
type=VarSet
trigger1=!AILevel&&!time
var(10)=Ifelse(command="x",0,Ifelse(command="y",1,2))
ignorehitpause=1
[State 3100, VarSet]
type=VarSet
trigger1=AILevel&&!time&&Numenemy
var(10)=Ifelse(p2bodydist x <50,0,Ifelse(p2bodydist x>150,2,1))
ignorehitpause=1

[State 3100, PosAdd]
type = PosAdd
trigger1=!time&& pos y>=-15
y = -20
ignorehitpause =1
[State 3100, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3100, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=49
[State 3100, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3100, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3100, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1

[State 3100, SuperPause]
type=SuperPause
trigger1=!time
time=50
moveTime=49
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,0
darken=0
poweradd=0

[State 3100, SuperPause FX]
type=Helper
trigger1=animelem=2
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=-8,-135
superMoveTime=255
size.xScale=1
size.yScale=1
ownPal=1

[State 3100, NotHitBy]
type=NotHitBy
trigger1=1
time=1
value=SCA

[State 3100, VelSet]
type = VelSet
trigger1 = animelem=4
x = Ifelse(!var(10),6,Ifelse(var(10)=1,9,12))
y = Ifelse(!var(10),6,Ifelse(var(10)=1,5,4))

[State 3100, V-Slasher]
type=Helper
trigger1=animelem=2
helpertype=normal
name="V-SlasherHand"
stateno=3105
ID=3105
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.525 * const(size.xscale))
size.yscale=(0.525 * const(size.yscale))
ignorehitpause=1
superMoveTime=999
pausemovetime=999

[State 3100, width]
type = width
trigger1 = !time
value=30,0

[State 3100, VelAdd]
type = VelAdd
trigger1=animelemtime(5)>=1
y = .45

[State 3100, Voice]
type=PlaySnd
trigger1=animelem=4
value=0,4
channel=0

[State 3100, Hit]
type=HitDef
trigger1 =  (var(15) < 5)
trigger1 = !time
id=3100
attr=A, HA
hitflag=MAF
guardflag=MA
damage=100,35
priority=5, hit
animtype=Hard
getpower=0,0
givepower=144,72
kill=0
hitsound=s2+10*var(44),14
guardsound=S130,1
pauseTime=0,0
guard.pauseTime=6,6
sparkNo=-1 + 0 * (var(33) :=0)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=60), var(36) :=-10
ground.type=High
ground.slidetime=1
ground.hittime =32
guard.hittime=12
ground.velocity=0
air.velocity=0,-2
guard.velocity=-3
airguard.velocity=-2, -2
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.5
air.fall=1
fall.recover=0
forcestand=1
palFX.time=32 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p1sprpriority=0

[State 3100, p2state]
type=targetstate
trigger1= movehit && numtarget(3100)
trigger1= target(3100),Movetype=H
ID=3100
value=3125
ignorehitpause=1
persistent=0
[State 3020, p1state]
type=changestate
trigger1= movehit && numtarget(3100)
trigger1= target(3100),Movetype=H
value=3102
ignorehitpause=1
persistent=0

[State 3100, End]
type = ChangeState
trigger1=animelemtime(4)>=0
trigger1 = pos y > -vel y
value = 3101
;-------------------------------------------------------------------------
;V-Slasher Land
[Statedef 3101]
type = S
movetype = I
physics = N
anim = Ifelse(prevstateno=3152,3104,Ifelse(prevstateno=3150,3107,Ifelse(prevstateno=3102,3103,3101)))

[State 3101, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 52,0
channel = 3
[State 3101, Landing Dust]
type = Explod
trigger1 = !time
anim = 8102
sprpriority = -3
postype = P1
pos = 20,2
scale = 0.6,0.6
pauseMovetime = -1
superMovetime = -1
ownPal = 1

[State 3101, CtrlSet]
type = CtrlSet
trigger1 = prevstateno = 3102||prevstateno = 3152
trigger1 = animelemtime(3)>0
value = 1
[State 3101, PosSet]
type = PosSet
trigger1 =1
y = 0
ignorehitpause = 1
[State 3101, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 3101, VelSet]
type = VelSet
trigger1 = animelem=4
x = 0

[State 3101, VelMul]
type = VelMul
trigger1 = animelemtime(1)>2 && animelemtime(4)<0
x = 0.9

[State 3101, Skid Dust]
type=Explod
trigger1=animelem=3
anim=8104
sprPriority=3
posType=P1
pos=32,0
scale=0.5,0.5
ownpal=1
[State 3101, Skid Snd]
type=PlaySnd
trigger1=animelem=3
value=101,0
channel=5

[State 3101, End]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------
;V-Slasher-Success
[Statedef 3102]
type=A
movetype=A
physics=N
velset=0,0
anim=3102
ctrl=0
sprpriority=1

[State 3102, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noautoturn

[State 3102, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
trigger1 = pos y < -vel y
value = 50
ctrl = 1
[State 3102, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
trigger1 = pos y > -vel y
value = 3101
ctrl = 0

[State 3102, TargetState]
type = TargetState
trigger1 = NumTarget && !time
value = 3125
[State 3102, TargetState]
type = TargetState
trigger1 = animelem = 3
value = 3127
[State 3102, TargetState]
type = TargetState
trigger1 = animelem = 8
value = 3126

[State 3102, BindToTarget]
type = BindToTarget
trigger1 = !time 
pos = 30,-2,foot
ignorehitpause = 1

[State 3102, HitAdd]
type = HitAdd
trigger1 = animelem=8
value = 1
[State 3102, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 8
value = floor(-120*fvar(10))
absolute = 1

[State 3102, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA
[State 3102, StateTypeSet]
type = StateTypeSet
trigger1 = pos y >= -10
trigger1 = !time
statetype = S

[State 3150, Voice]
type=PlaySnd
trigger1=animelem=8
value=1000,1
channel=0

[State 3102, V-Slasher]
type=Helper
trigger1=!time
helpertype=normal
name="V-SlasherHand2"
stateno=3106
ID=3106
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.525 * const(size.xscale))
size.yscale=(0.525 * const(size.yscale))
ignorehitpause=1
[State 3102, V-Slasher]
type=Helper
trigger1=animelem=2
helpertype=normal
name="V-SlasherHand2"
stateno=3110
ID=3110
pos=ceil(20*const(size.xscale)),ceil(-90*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ignorehitpause=1

[State 3102, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(8)>0
value = 0
[State 3102, StateTypeSet]
type = StateTypeSet
trigger1 = animelem=8
statetype = A 

[State 3102, VelSet]
type = VelSet
trigger1 = animelem = 8 
x = 2
y = -8
[State 3100, VelAdd]
type = VelAdd
trigger1=animelemtime(8)>=1
y = .45

[State 3102, EnvShake]
type = EnvShake
trigger1 = animelem = 8
time = 15
freq = 60
ampl = Ifelse(random<500,6,-6)

[State 3102, HitSpark]
type=Helper
trigger1 =  !time
trigger2 = animelemtime(7)=3
helperType=Normal
stateNo=8017
ID=8000
name="Spark"
posType=P1
pos = ceil(42*const(size.xscale)),-75
facing=-1
ownPal=1
size.xScale=1
size.yScale=1

[State 3102, hit]
type=PlaySnd
trigger1 = animelemtime(7)=3
value=2+10*var(44),14
channel=6
[State 3102, X-plosion]
type=PlaySnd
trigger1 = animelem=8
value=1400,3
channel=1

[State 3102, X-plosion]
type = Explod
trigger1 = animelemtime(8)>=0 && animelemtime(12)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=4
posType = P1
pos = Ifelse(random<500,-10+random%70,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.125,0.125
ownpal = 1
[State 3102, X-plosion]
type = Explod
trigger1 = animelemtime(8)>=0 && animelemtime(12)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=5
posType = P1
pos = Ifelse(random<500,-10+random%70,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.25,0.25
ownpal = 1
[State 3102, X-plosion]
type = Explod
trigger1 = animelemtime(9)=1
anim = 1420
sprPriority=6
posType = P1
pos = 50,-35
vel = 0,0
scale = 0.5,0.5
ownpal = 1

[State 3102, flames]
type = helper
trigger1 = numtarget && !numhelper(7180)
trigger1 = animelemtime(8)=1
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 3102, TargetPowerAdd]
type=TargetPowerAdd
trigger1=NumTarget && AnimElem=8
value=144
[State 3102, VarAdd]
type=VarAdd
trigger1=Animelem=3||Animelem=8
var(13)=1
[State 3102, Juggle]
type=VarAdd
trigger1=NumTarget && AnimElem=8
var(15)=1
ignoreHitPause=1
[State 3102, Juggle]
type=VarSet
trigger1=NumTarget && AnimElem=8
var(16)=1
ignoreHitPause=1

[State 3102, End]
type=ChangeState
trigger1 = animelemtime(9)>0
trigger1 = pos y > -vel y
value=3101
;----------------------------------------------------------------------
;Max V-Slasher
[Statedef 3150]
type=A
movetype=A
physics=N
anim=3100
poweradd=-2000
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3150, VarSet]
type=VarSet
trigger1=!AILevel&&!time
var(10)=Ifelse(command="xz",0,Ifelse(command="xy",1,2))
ignorehitpause=1
[State 3150, VarSet]
type=VarSet
trigger1=AILevel&&!time&&Numenemy
var(10)=Ifelse(p2bodydist x <50,0,Ifelse(p2bodydist x>100,2,1))
ignorehitpause=1

[State 3150, PosAdd]
type = PosAdd
trigger1=!time&& pos y>=-15
y = -20
ignorehitpause =1
[State 3150, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3150, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=49
[State 3150, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3150, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3150, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1

[State 3150, SuperPause]
type=SuperPause
trigger1=!time
time=50
moveTime=49
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,1
darken=0
poweradd=0

[State 3150, SuperPause FX]
type=Helper
trigger1=animelem=2
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=-8,-135
superMoveTime=255
size.xScale=1
size.yScale=1
ownPal=1

[State 3150, NotHitBy]
type=NotHitBy
trigger1=1
time=1
value=SCA

[State 3150, VelSet]
type = VelSet
trigger1 = animelem=4
x = 10+4*var(10)
y = Ifelse(!var(10),10,Ifelse(var(10)=1,7.5,5))

[State 3150, Orochi]
type=Helper
trigger1=!time
helpertype=normal
name="V-SlasherOrochi"
stateno=3155
ID=3155
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ignorehitpause=1
superMoveTime=999
pausemovetime=999
[State 3150, V-Slasher]
type=Helper
trigger1=animelem=2
helpertype=normal
name="V-SlasherHand"
stateno=3105
ID=3105
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.525 * const(size.xscale))
size.yscale=(0.525 * const(size.yscale))
ignorehitpause=1
superMoveTime=999
pausemovetime=999

[State 3150, width]
type = width
trigger1 = !time
value=30,0

[State 3150, VelAdd]
type = VelAdd
trigger1=animelemtime(5)>=1
y = .45

[State 3150, Voice]
type=PlaySnd
trigger1=animelem=4
value=0,4
channel=0

[State 3150, Hit]
type=HitDef
trigger1 =  (var(15) < 5)
trigger1 = !time
id=3150
attr=A, HA
hitflag=MAF
guardflag=MA
damage=120,35
priority=5, hit
animtype=Hard
getpower=0,0
givepower=144,72
kill=0
hitsound=s2+10*var(44),14
guardsound=S130,1
pauseTime=0,0
guard.pauseTime=6,6
sparkNo=-1 + 0 * (var(33) :=0)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=60), var(36) :=-10
ground.type=High
ground.slidetime=1
ground.hittime =32
guard.hittime=12
ground.velocity=0
air.velocity=0,-2
guard.velocity=-3
airguard.velocity=-2, -2
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.5
air.fall=1
fall.recover=0
forcestand=1
palFX.time=32 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p1sprpriority=0

[State 3150, p2state]
type=targetstate
trigger1= movehit && numtarget(3150)
trigger1= target(3150),Movetype=H
ID=3150
value=3125
ignorehitpause=1
persistent=0
[State 3020, p1state]
type=changestate
trigger1= movehit && numtarget(3150)
trigger1= target(3150),Movetype=H
value=3152
ignorehitpause=1
persistent=0

[State 3150, End]
type = ChangeState
trigger1=animelemtime(4)>=0
trigger1 = pos y > -vel y
value = 3101

;------------------------------------------------------------------
;Max V-Slasher-Success
[Statedef 3152]
type=A
movetype=A
physics=N
velset=0,0
anim=3152
ctrl=0
sprpriority=1

[State 3152, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noautoturn

[State 3152, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
trigger1 = pos y < -vel y
value = 50
ctrl = 1
[State 3152, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
trigger1 = pos y > -vel y
value = 3101
ctrl = 0

[State 3152, TargetState]
type = TargetState
trigger1 = NumTarget && !time
value = 3125
[State 3152, TargetState]
type = TargetState
trigger1 = animelem = 4
trigger2 = animelem = 7
value = 3127
[State 3152, TargetState]
type = TargetState
trigger1 = animelem = 8
value = 3126

[State 3152, BindToTarget]
type = BindToTarget
trigger1 = !time 
pos = 30,-2,foot
ignorehitpause = 1

[State 3152, HitAdd]
type = HitAdd
trigger1 = animelem=7
trigger2 = animelem=8
value = 1
[State 3152, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 7
value = floor(-80*fvar(10))
kill = 0
[State 3152, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 8
value = floor(-120*fvar(10))
absolute = 1

[State 3152, Voice]
type=PlaySnd
trigger1=animelem=7
value=0,3
channel=0
[State 3152, Voice]
type=PlaySnd
trigger1=animelem=8
value=1000,2
channel=0
[State 3152, StateTypeSet]
type = StateTypeSet
trigger1 = pos y >= -10
trigger1 = !time
statetype = S

[State 3152, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 3152, V-Slasher]
type=Helper
trigger1=!time
helpertype=normal
name="V-SlasherHand2"
stateno=3106
ID=3106
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.525 * const(size.xscale))
size.yscale=(0.525 * const(size.yscale))
ignorehitpause=1
[State 3152, V-Slasher]
type=Helper
trigger1=animelem=2
helpertype=normal
name="V-SlasherHand2"
stateno=3110
ID=3110
pos=ceil(20*const(size.xscale)),ceil(-90*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.75 * const(size.xscale))
size.yscale=(0.75 * const(size.yscale))
ignorehitpause=1

[State 3152, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(8)>0
value = 0

[State 3152, VelSet]
type = VelSet
trigger1 = animelem = 8 
x = 2
y = -8
[State 3100, VelAdd]
type = VelAdd
trigger1=animelemtime(8)>=1
y = .45

[State 3152, EnvShake]
type = EnvShake
trigger1 = animelem = 7
time = 12
freq = 50
ampl = Ifelse(random<500,3,-3)
[State 3152, EnvShake]
type = EnvShake
trigger1 = animelem = 8
time = 15
freq = 60
ampl = Ifelse(random<500,6,-6)

[State 3152, HitSpark]
type=Helper
trigger1 =  !time
trigger2 = animelemtime(7)=3
helperType=Normal
stateNo=8017
ID=8000
name="Spark"
posType=P1
pos = ceil(42*const(size.xscale)),-75
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
[State 3152, hit]
type=PlaySnd
trigger1 = animelemtime(7)=3
value=2+10*var(44),14
channel=6

[State 3152, X-plosion]
type=PlaySnd
trigger1 = animelem=8
value=1400,3
channel=1

[State 3152, X-plosion]
type = Explod
trigger1 = animelemtime(8)>=0 && animelemtime(12)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=4
posType = P1
pos = Ifelse(random<500,-10+random%70,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.125,0.125
ownpal = 1
[State 3152, X-plosion]
type = Explod
trigger1 = animelemtime(8)>=0 && animelemtime(12)<0
trigger1 = timemod = 2,0
anim = 1420
sprPriority=5
posType = P1
pos = Ifelse(random<500,-10+random%70,0+random%40),-60-random%50
random = 20,20
vel = 0,0
scale = 0.25,0.25
ownpal = 1
[State 3152, X-plosion]
type = Explod
trigger1 = animelemtime(9)=1
anim = 1420
sprPriority=6
posType = P1
pos = 50,-35
vel = 0,0
scale = 0.5,0.5
ownpal = 1

[State 3152, flames]
type = helper
trigger1 = numtarget && !numhelper(7180)
trigger1 = animelemtime(8)=1
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 3152, TargetPowerAdd]
type=TargetPowerAdd
trigger1=NumTarget && AnimElem=8
value=288
[State 3152, VarAdd]
type=VarAdd
trigger1=Animelem=3||Animelem=8
var(13)=1
[State 3152, Juggle]
type=VarAdd
trigger1=NumTarget && AnimElem=8
var(15)=1
ignoreHitPause=1
[State 3152, Juggle]
type=VarSet
trigger1=NumTarget && AnimElem=8
var(16)=1
ignoreHitPause=1

[State 3152, End]
type=ChangeState
trigger1 = animelemtime(9)>0
trigger1 = pos y > -vel y
value=3101
;------------------------------------------------------------------
;Leona Blade Attack
[Statedef 3200]
type=S
movetype=A
physics=N
anim=3200
poweradd=-3000
ctrl=0
velset=0,0
sprpriority=2
facep2=1

[State 3200, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3200, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=124
[State 3200, Super Cancel Flag]
type=VarSet
trigger1=!time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3200, Hyper Cancel Flag]
type=VarSet
trigger1=!time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3200, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(time % 2) && time <=12
time=1
add=255,255,255
ignoreHitPause=1

[State 3000, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause =1

[State 3200, SuperPause FX]
type=Helper
trigger1=!time
helperType=Normal
stateNo=8520
ID=8500
name="Superpause FX"
posType=P1
pos=-10,-87
superMoveTime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3200, SuperPause]
type=SuperPause
trigger1=!time
time=130
movetime=130
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,2
darken=0
poweradd=0

[State 3200, AS]
type=AssertSpecial
trigger1=1
flag=nomusic
ignorehitpause=1
persistent=1

[State 3200, NotHitBy]
type=NotHitBy
trigger1=animelemtime(15) < 0
time=1
value=SCA

[state 3200, PosAdd]
type = posadd
trigger1 = animelemtime(12)=0
x = 8
[state 3200, PosAdd]
type = posadd
trigger1 = animelemtime(13)=0
x = 18
[state 3200, PosAdd]
type = posadd
trigger1 = animelemtime(19)=0
x = -4
[state 3200, PosAdd]
type = posadd
trigger1 = animelemtime(20)=0
x = -6

[State 3200, Voice]
type=PlaySnd
trigger1 =animelem=3
value=3200,0
channel=0

[State 3200, Snd]
type=PlaySnd
trigger1 =animelem=13
value=3200,1
channel=1
[State 3200, Move Snd]
type=PlaySnd
trigger1=Animelem=4
value=1,2
channel=2

[State 3200, Width]
type=Width
trigger1=animelem=12
edge=40,0
ignorehitpause =1

[State 3200, Skid Dust]
type=Explod
trigger1=animelem=14
anim=8104
sprPriority=3
posType=P1
pos=32,0
scale=0.5,0.5
ownpal=1
[State 3200, Skid Snd]
type=PlaySnd
trigger1=animelem=14
value=101,0
channel=5

[State 3200, BG]
type=Helper
trigger1=!time
helpertype=normal
name="BlackBR"
stateno=3550
ID=3550
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(5.5 * const(size.xscale))
size.yscale=(5.5 * const(size.yscale))
ignorehitpause=1
supermovetime=999
pausemovetime=999

[State 3200, Leona Blade]
type=Helper
trigger1=animelem=7
helpertype=normal
name="LeonaBladeFX"
stateno=3205
ID=3205
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ignorehitpause=1
supermovetime=999
pausemovetime=999
[State 3200, Leona Blade]
type=Helper
trigger1=animelem=5
helpertype=normal
name="LeonaBladeHand"
stateno=3202
ID=3202
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.525 * const(size.xscale))
size.yscale=(0.525 * const(size.yscale))
ignorehitpause=1
supermovetime=999
pausemovetime=999

[State 3200, AttackDist]
type = AttackDist
trigger1 = anim=3200
value =320
ignorehitpause = 1

[State 3200, Hit]
type=HitDef
trigger1 = animelem=13
id=3200
attr=S, HA
hitflag=MAF
guardflag=M
damage=0,56
priority=5, hit
animtype=Hard
getpower=0,0
givepower=288,144
kill=0
hitsound=s3200,3
guardsound=S130,1
pauseTime=1,1
guard.pauseTime=12,12
sparkNo=-1 + 0 * (var(33) :=8017)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=65), var(36) :=-51
ground.type=High
ground.slidetime=1
ground.hittime =32
guard.hittime=12
ground.velocity=0
air.velocity=0,-2
guard.velocity=-3
airguard.velocity=-2, -2
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.5
air.fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p1sprpriority=0

[State 3200, Hit]
type=HitDef
trigger1 = animelem=14
id=3205
attr=S, HA
hitflag=MAF
guardflag=M
damage=180,35
priority=5, hit
animtype=Hard
getpower=0,0
givepower=144,72
hitsound=s3200,3
guardsound=S130,1
pauseTime=12,12
guard.pauseTime=12,12
sparkNo=-1 + 0 * (var(33) :=8017)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=260), var(36) :=-61
ground.type=High
air.animtype=diagup
fall.animtype=up
ground.slidetime=1
ground.hittime =32
guard.hittime=12
ground.velocity=-8,-7
air.velocity=-5,-6
guard.velocity=-3
airguard.velocity=-2, -2
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.5
air.fall=1
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p1sprpriority=0

[State 3200, p2state]
type=targetstate
trigger1= movehit && numtarget(3200)
trigger1= target(3200),Movetype=H
ID=3200
value=3025
ignorehitpause=1
persistent=0
[State 3200, p1state]
type=changestate
trigger1= movehit && numtarget(3200)
trigger1= target(3200),Movetype=H
value=3201
ignorehitpause=1
persistent=0

[State 3200, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(15) = 0
moveType=I

[State 3200, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;------------------------------------------------------------------
;Leona Blade-Success
[Statedef 3201]
type=S
movetype=A
physics=N
velset=0,0
anim=3201
ctrl=0
sprpriority=1

[State 3201, AS]
type=AssertSpecial
trigger1=1
flag=nomusic
ignorehitpause=1
persistent=1

[State 3201, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noautoturn
[State 3201, Safety]
type = ChangeState
trigger1 = !time && !NumTarget
value = 0
ctrl = 1
[State 3201, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = !time
value = 3225
[State 3201, TargetState]
type = TargetState
trigger1=animelemtime(1)=60
value = 3025
[State 3201, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = animelem=2
value = 3226

[State 3201, HitAdd]
type = HitAdd
trigger1 = animelem=2
value = 1
[State 3201, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 2
value = floor(-450*fvar(10))
absolute = 1

[State 3201, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA
[State 3201, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 18
freq = 70
ampl = Ifelse(random<500,7,-7)

[State 3200, Leona Blade]
type=Helper
trigger1=!time
helpertype=normal
name="CutFX"
stateno=3210
ID=3210
pos=ceil(50*const(size.xscale)),ceil(-60*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ignorehitpause=1
[State 3200, Leona Blade]
type=Helper
trigger1=animelemtime(1)=60
helpertype=normal
name="CutBack"
stateno=3211
ID=3211
pos=ceil(125*const(size.xscale)),ceil(-90*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ignorehitpause=1

[State 3001, Leona FX]
type = explod
trigger1=animelemtime(1)=60
anim = 3212
scale = 0.5,0.5
sprpriority = 4
postype = p1
pos = 50,-60
ownpal = 1
ignorehitpause = 1

[State 3201, TargetBind]
type = TargetBind
trigger1 = !time 
pos = 50,0

[State 3201, HitSpark]
type=Helper
trigger1=animelemtime(1)=70
helperType=Normal
stateNo=8017
ID=8000
name="Spark"
posType=P1
pos = ceil(90*const(size.xscale)),-80
facing=-1
ownPal=1
size.xScale=1
size.yScale=1

[State 3201, Snd]
type=PlaySnd
trigger1 = !time
value=3200,6
channel=8

[State 3201, Hit Snd]
type=PlaySnd
trigger1 = animelemtime(1)=60
value=3200,5
channel=3

[State 3201, Voice]
type = PlaySnd
trigger1 = animelemtime(1)=20
value = 3200,4
channel = 0

[State 3201, TargetPowerAdd]
type=TargetPowerAdd
trigger1=NumTarget && AnimElem=2
value=144
[State 3201, VarAdd]
type=VarAdd
trigger1=NumTarget && AnimElem=2
var(13)=1
[State 3201, Juggle]
type=VarAdd
trigger1=NumTarget && AnimElem=2
var(15)=1
ignoreHitPause=1
[State 3201, Juggle]
type=VarSet
trigger1=NumTarget && AnimElem=2
var(16)=1
ignoreHitPause=1

[State 3201, End]
type=ChangeState
trigger1= !animtime
value=0
ctrl=1