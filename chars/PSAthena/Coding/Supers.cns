;======================<SHINING CRYSTAL BIT>===================
[Statedef 3000]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3000
poweradd = ifelse(var(20) > 0, 0, -1000)
sprpriority = 1
facep2 = 1

[State 3000, Crystal Bits Hit Detector];special thanks to Zzyzzyxx
type = VarSet
trigger1 = !Time
var(27) = 0
ignorehitpause = 1
persistent = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(5) < 0
time = 1
value = SCA

[State 3000, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3000, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3000, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3000, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3000, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3000, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8500
ID = 8500
name = "Superpause FX"
posType = P1
pos = 0,-70
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3000, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3000, Width]
type = Width
trigger1 = 1
player = 10,0
edge = 10,0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000, 0
channel = 0

[State 3000, Crystal Bit 1]
type = Helper
trigger1 = AnimElem = 3
helperType = Normal
stateNo = 3005
ID = 3005
name = "Crystal Bit1"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3000, Crystal Bit 2]
type = Helper
trigger1 = AnimElem = 3
helperType = Normal
stateNo = 3007
ID = 3005
name = "Crystal Bit2"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3000, Crystal Shoot]
type = ChangeState
triggerall = RoundState = 2
trigger1 = Time > 64 && Time < 186
trigger1 = Command = "Psycho Ball"
value = 3010

[State 3000, End]
type = ChangeState
trigger1 =  Time > 199
value = 3001
ctrl = 0

;End
[Statedef 3001]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3001
velset = 0,0
sprpriority = 1

[State 3001, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;Crystal Shoot(holding)
[Statedef 3010]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3010
poweradd = 0
sprpriority = 1
facep2 = 1

[State 3010, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3010, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3010, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3010, Voice]
type = PlaySnd
trigger1 = !Time
value = 0, 1
channel = 0

[State 3010, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8500
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-128
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3010, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3010, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3010, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3010, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000, 3
channel = 1

[State 3010, Crystal Shoot]
type = Helper
trigger1 = Time = 50
helperType = Normal
stateNo = 3015
ID = 3005
name = "Crystal Shoot"
posType = P1
pos = 0,0
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3010, End]
type = ChangeState
trigger1 =  Time > 60
trigger1 = Command!="hold_x" && Command!="hold_y" && Command!="hold_z"
trigger2 = Time >= 170
value = 3011
ctrl = 0

;Crystal Shoot(Fire!)
[Statedef 3011]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 0
anim = 3011
velset = 0,0
sprpriority = 1

[State 3011, Button Detect]
type = VarSet
trigger1 = !Time
var(10) = ifElse((command = "x" || command = "rlsx"), 0, ifElse((command = "y" || command = "rlsy"), 1, 2))

[State 3011, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3011, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3011, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
player = 45,0

[State 3011, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2
channel = 0

[State 3011, Blast Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 3
channel = 1

[State 3011, Crystal FX]
type = Explod
trigger1 = !NumExplod(6230)
trigger1 = AnimElemTime(1) = 0
anim = 3015
id = 6230
pos = -16, -102
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
pausemovetime = 255
supermovetime = 255
removeongethit = 1

[State 3011, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2 
id = 6230

[State 3011, Crystal Shoot]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3016
ID = 3005
name = "Crystal Shoot"
posType = P1
pos = 48,-55
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3011, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;======================<AIR SHINING CRYSTAL BIT>===================
[Statedef 3050]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3050
poweradd = ifelse(var(20) > 0, 0, -1000)
sprpriority = 1

[State 3050, Crystal Bits Hit Detector];special thanks to Zzyzzyxx
type = VarSet
trigger1 = !Time
var(27) = 0
ignorehitpause = 1
persistent = 0

[State 3050, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3050, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3050, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3050, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3050, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3050, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3050, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3050, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8500
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-77
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3050, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3050, Width]
type = Width
trigger1 = 1
player = 10,0
edge = 5,0

[State 3050, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000, 0
channel = 0

[State 3050, Crystal Bit 1]
type = Helper
trigger1 = AnimElem = 3
helperType = Normal
stateNo = 3055
ID = 3005
name = "Crystal Bit1"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3050, Crystal Bit 2]
type = Helper
trigger1 = AnimElem = 3
helperType = Normal
stateNo = 3057
ID = 3005
name = "Crystal Bit2"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3050, Crystal Shoot]
type = ChangeState
triggerall = RoundState = 2
trigger1 = Time > 64 && Time < 186
trigger1 = Command = "Psycho Ball"
value = 3060

[State 3050, End]
type = ChangeState
trigger1 =  Time > 199
value = 3051
ctrl = 0

;Air End
[Statedef 3051]
type = A
movetype = I
physics = N
ctrl = 0
anim = 3051
velset = 0,0
sprpriority = 1

[State 3051, Gravity]
type = VelAdd
trigger1 = AnimElemTime(6) >= 0
y = 0.5

[State 3051, End]
type = ChangeState
trigger1 = pos y > -vel y
value = 3052

;Landing
[Statedef 3052]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1105
velset = 0, 0

[State 3052, On Ground]
type = Posset
trigger1 = !Time
y = 0

[State 3052, Land Snd]
type = PlaySnd
trigger1 = Time = 1
value = 52,0

[State 3052, Landing Dust Explod]
type = Explod
trigger1 = !Time
anim = 8102
sprpriority = -3
postype = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3052, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;Air Crystal Shoot(holding)
[Statedef 3060]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3060
poweradd = 0
sprpriority = 1
facep2 = 1

[State 3060, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3060, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3060, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3060, Voice]
type = PlaySnd
trigger1 = !Time
value = 0, 1
channel = 0

[State 3060, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8500
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-136
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3060, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3060, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3060, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000, 3
channel = 1

[State 3060, Crystal Shoot]
type = Helper
trigger1 = Time = 50
helperType = Normal
stateNo = 3065
ID = 3005
name = "Crystal Shoot"
posType = P1
pos = 0,0
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3060, End]
type = ChangeState
trigger1 =  Time > 60
trigger1 = Command!="hold_x" && Command!="hold_y" && Command!="hold_z"
trigger2 = Time >= 170
value = 3061
ctrl = 0

;Air Crystal Shoot(Fire!)
[Statedef 3061]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 0
anim = 3061
velset = 0,0
sprpriority = 1

[State 3061, Button Detect]
type = VarSet
trigger1 = !Time
var(10) = ifElse((command = "x" || command = "rlsx"), 0, ifElse((command = "y" || command = "rlsy"), 1, 2))

[State 3061, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3061, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
player = 35,0

[State 3061, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2
channel = 0

[State 3061, Blast Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 3
channel = 1

[State 3061, Crystal FX]
type = Explod
trigger1 = !NumExplod(6230)
trigger1 = AnimElemTime(1) = 0
anim = 3015
id = 6230
pos = 4, -114
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
pausemovetime = 255
supermovetime = 255
removeongethit = 1

[State 3061, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2 
id = 6230

[State 3061, Crystal Shoot]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3066
ID = 3005
name = "Crystal Shoot"
posType = P1
pos = 44,-87
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3061, Gravity]
type = VelAdd
trigger1 = AnimElemTime(7) >= 0
y = 0.5

[State 3061, End]
type = ChangeState
trigger1 = AnimElemTime(3) >= 0
trigger1 = pos y > -vel y
value = 3052

;======================<MAX SHINING CRYSTAL BIT>===================
[Statedef 3100]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3100
poweradd = ifelse(var(20) > 0, -1000, -2000)
sprpriority = 1
facep2 = 1

[State 3100, Crystal Bits Hit Detector];special thanks to Zzyzzyxx
type = VarSet
trigger1 = !Time
var(27) = 0
ignorehitpause = 1
persistent = 0

[State 3100, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3100, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3100, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3100, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3100, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3100, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3100, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3100, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-80
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3100, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3100, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3100, StopSnd]
type = StopSnd
trigger1 = !Time
channel = 0

[State 3100, Width]
type = Width
trigger1 = 1
player = 10,0
edge = 10,0

[State 3100, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000, 0
channel = 0

[State 3100, Psycho SCB FX]
type = Explod
trigger1 = !NumExplod(3102)
trigger1 = AnimElemTime(2) = 0
anim = 3102
id = 3102
pos = -2, -70
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
pausemovetime = 255
supermovetime = 255
removeongethit = 1

[State 3100, Crystal Bit 1]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3105
ID = 3105
name = "Crystal Bit1"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3100, Crystal Bit 2]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3107
ID = 3105
name = "Crystal Bit2"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3100, Crystal Shoot]
type = ChangeState
triggerall = RoundState = 2
trigger1 = Time > 64 && Time < 296
trigger1 = Command = "Psycho Ball"
value = 3110

[State 3100, End]
type = ChangeState
trigger1 =  Time > 307
value = 3101
ctrl = 0

;MAX End
[Statedef 3101]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3101
velset = 0,0
sprpriority = 1

[State 3001, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1


;MAX Crystal Shoot(holding)
[Statedef 3110]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3110
poweradd = 0
sprpriority = 1
facep2 = 1

[State 3110, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3110, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3110, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3110, Voice]
type = PlaySnd
trigger1 = !Time
value = 0, 1
channel = 0

[State 3110, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-128
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3110, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3110, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3110, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3110, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000, 3
channel = 1

[State 3110, Crystal Shoot]
type = Helper
trigger1 = Time = 50
helperType = Normal
stateNo = 3115
ID = 3105
name = "Crystal Shoot"
posType = P1
pos = 0,0
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3110, End]
type = ChangeState
trigger1 =  Time > 60
trigger1 = Command!="hold_x" && Command!="hold_y" && Command!="hold_z"
trigger2 = Time >= 170
value = 3111
ctrl = 0

;MAX Crystal Shoot(Fire!)
[Statedef 3111]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = 0
anim = 3011
velset = 0,0
sprpriority = 1

[State 3111, Button Detect]
type = VarSet
trigger1 = !Time
var(10) = ifElse((command = "x" || command = "rlsx"), 0, ifElse((command = "y" || command = "rlsy"), 1, 2))

[State 3111, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3111, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3111, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
player = 45,0

[State 3111, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2
channel = 0

[State 3111, Blast Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 3
channel = 1

[State 3111, Crystal FX]
type = Explod
trigger1 = !NumExplod(6230)
trigger1 = AnimElemTime(1) = 0
anim = 3015
id = 6230
pos = -16, -102
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
pausemovetime = 255
supermovetime = 255
removeongethit = 1

[State 3111, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2 
id = 6230

[State 3111, Crystal Shoot]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3116
ID = 3105
name = "Crystal Shoot"
posType = P1
pos = 48,-55
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3111, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;======================<AIR MAX SHINING CRYSTAL BIT>===================
[Statedef 3150]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3150
poweradd = ifelse(var(20) > 0, -1000, -2000)
sprpriority = 1

[State 3150, Crystal Bits Hit Detector];special thanks to Zzyzzyxx
type = VarSet
trigger1 = !Time
var(27) = 0
ignorehitpause = 1
persistent = 0

[State 3150, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3150, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3150, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3150, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3150, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3150, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3150, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3150, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-80
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3150, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3150, Width]
type = Width
trigger1 = 1
player = 10,0
edge = 5,0

[State 3150, StopSnd]
type = StopSnd
trigger1 = !Time
channel = 0

[State 3150, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000, 0
channel = 0

[State 3150, Psycho SCB FX]
type = Explod
trigger1 = !NumExplod(3152)
trigger1 = AnimElemTime(2) = 0
anim = 3102
id = 3152
pos = -2, -70
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
pausemovetime = 255
supermovetime = 255
removeongethit = 1

[State 3150, Crystal Bit 1]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3155
ID = 3105
name = "Crystal Bit1"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3150, Crystal Bit 2]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3157
ID = 3105
name = "Crystal Bit2"
posType = P1
pos = 0,-60
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3150, Crystal Shoot]
type = ChangeState
triggerall = RoundState = 2
trigger1 = Time > 64 && Time < 296
trigger1 = Command = "Psycho Ball"
value = 3160

[State 3150, End]
type = ChangeState
trigger1 =  Time > 307
value = 3151
ctrl = 0

;MAX Air End
[Statedef 3151]
type = A
movetype = I
physics = N
ctrl = 0
anim = 3151
velset = 0,0
sprpriority = 1

[State 3151, Gravity]
type = VelAdd
trigger1 = AnimElemTime(6) >= 0
y = 0.5

[State 3151, End]
type = ChangeState
trigger1 = pos y > -vel y
value = 3052


;MAX Air Crystal Shoot(holding)
[Statedef 3160]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3160
poweradd = 0
sprpriority = 1
facep2 = 1

[State 3160, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
time = 1
value = SCA

[State 3160, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3160, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3160, Voice]
type = PlaySnd
trigger1 = !Time
value = 0, 1
channel = 0

[State 3160, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-136
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3160, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3160, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3160, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000, 3
channel = 1

[State 3160, Crystal Shoot]
type = Helper
trigger1 = Time = 50
helperType = Normal
stateNo = 3165
ID = 3105
name = "Crystal Shoot"
posType = P1
pos = 0,0
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3160, End]
type = ChangeState
trigger1 =  Time > 60
trigger1 = Command!="hold_x" && Command!="hold_y" && Command!="hold_z"
trigger2 = Time >= 170
value = 3161
ctrl = 0

;MAX Air Crystal Shoot(Fire!)
[Statedef 3161]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 0
anim = 3061
velset = 0,0
sprpriority = 1

[State 3161, Button Detect]
type = VarSet
trigger1 = !Time
var(10) = ifElse((command = "x" || command = "rlsx"), 0, ifElse((command = "y" || command = "rlsy"), 1, 2))

[State 3161, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 3161, Width]
type = Width
trigger1 = AnimElemTime(3) < 0
player = 35,0

[State 3161, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2
channel = 0

[State 3161, Blast Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 3
channel = 1

[State 3161, Crystal FX]
type = Explod
trigger1 = !NumExplod(6230)
trigger1 = AnimElemTime(1) = 0
anim = 3015
id = 6230
pos = 4, -114
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
pausemovetime = 255
supermovetime = 255
removeongethit = 1

[State 3161, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2 
id = 6230

[State 3161, Crystal Shoot]
type = Helper
trigger1 = AnimElem = 2
helperType = Normal
stateNo = 3166
ID = 3105
name = "Crystal Shoot"
posType = P1
pos = 44,-87
size.xscale = 0.5
size.yscale = 0.5
keyctrl = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1

[State 3161, Gravity]
type = VelAdd
trigger1 = AnimElemTime(7) >= 0
y = 0.5

[State 3161, End]
type = ChangeState
trigger1 = AnimElemTime(3) >= 0
trigger1 = pos y > -vel y
value = 3052

;======================<PHOENIX FANG ARROW>===================
[Statedef 3200]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3200
poweradd = ifelse(var(20) > 0, 0, -1000)
sprpriority = 2

[State 3200, NotHitBy]
type = NotHitBy
trigger1 = Time < 70
time = 1
value = SCA

[State 3200, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3200, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3200, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3200, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3200, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3200, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3200, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8500
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-77
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3200, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3200, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3200, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3200, 0
channel = 0

[State 3200, Voice 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3200, 1
channel = 0

[State 3200, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1000, 7
channel = 1

[State 3200, No Push]
type = PlayerPush
trigger1 = AnimElemTime(3) >= 0
value = 0

[State 3200, VarSet: X Position Set]
type = VarSet
trigger1 = AnimElem = 3
fvar(15) = Pos X

[State 3200, VarSet: Y Position Set]
type = VarSet
trigger1 = AnimElem = 3
fvar(16) = Pos Y

[State 3200, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(3) >= 0
value = 1
movecamera = 0,0

[State 3200, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = 5.75
y = 5

[State 3200, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3200, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3200, Position Helper]
type = Helper
trigger1 = !Time
helperType = Normal
stateNo = 3290
ID = 3290
name = "Position"
posType = P1
pos = 0,0
ownpal = 1
facing = 1

[State 3200, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6152)
trigger1 = AnimElem = 3
helpertype = Normal
stateno = 6152
ID = 6152
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3200, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6153)
trigger1 = AnimElem = 3
helpertype = Normal
stateno = 6153
ID = 6153
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3200, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 4
trigger1 = var(14) < 4
trigger1 = AnimElem = 3 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,8
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = 0
air.velocity = -4, -6.5
guard.velocity = 0
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3200, End]
type = ChangeState
trigger1 = AnimElemTime(3) >= 0
trigger1 = (pos y-40)>-vel y
value = 3201

;2nd Rep
[Statedef 3201]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3201
poweradd = 0
sprpriority = 2

[State 3201, Posset: Teleport Back Up]
type = PosSet
trigger1 = !Time
x = ceil(fvar(15))
y = ceil(fvar(16))

[State 3201, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3201, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 6
channel = 2

[State 3201, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 7
channel = 1

[State 3201, No Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 3201, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3201, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 5.75
y = 5

[State 3201, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3201, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3201, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = AnimElem = 1
anim = 6220
ID = 6220
pos = 0,-70
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 65535
supermovetime = 65535

[State 3201, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6152)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6152
ID = 6152
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3201, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6153)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6153
ID = 6153
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3201, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 8
trigger1 = var(14) < 4
trigger1 = AnimElem = 2 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,8
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = 0
air.velocity = -4, -6.5
guard.velocity = 0
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3201, End]
type = ChangeState
trigger1 = AnimElemTime(2) >= 0
trigger1 = (pos y-40)>-vel y
value = 3202

;3rd Rep
[Statedef 3202]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3201
poweradd = 0
sprpriority = 2

[State 3202, Posset: Teleport Back Up]
type = PosSet
trigger1 = !Time
x = ceil(fvar(15))
y = ceil(fvar(16))

[State 3202, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3202, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 6
channel = 2

[State 3202, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3200, 2
channel = 0

[State 3202, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 7
channel = 1

[State 3202, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 5.75
y = 5

[State 3202, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3202, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3202, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = AnimElem = 1
anim = 6220
ID = 6220
pos = 0,-70
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 65535
supermovetime = 65535

[State 3202, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6152)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6152
ID = 6152
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3202, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6153)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6153
ID = 6153
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3202, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 12
trigger1 = var(14) < 4
trigger1 = AnimElem = 2 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,4
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = -8
air.velocity = -4, -6.5
guard.velocity = -8
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3202, End]
type = ChangeState
trigger1 = AnimElemTime(2) >= 0
trigger1 = (pos y-40)>-vel y
value = 3203

;3rd Rep Landing
[Statedef 3203]
type = C
movetype = A
physics = N
ctrl = 0
poweradd = 0
anim = 1425
;velset = 0, 0

[State 3203, On Ground]
type = Posset
trigger1 = !Time
y = 0

[State 3203, VelStop]
type = VelSet
trigger1 = !Time
y = 0

[State 3203, Velocity: When Turned]
type = VelMul
trigger1 = !Time
trigger1 = P2dist X < 0
x = -1

[State 3203, Friction]
type = VelMul
trigger1 = 1
x = .88

[State 3203, Turn]
type = Turn
trigger1 = !Time
trigger1 = P2dist X < 0

[State 3203, Land Snd]
type = PlaySnd
trigger1 = Time = 1
value = 52,0

[State 3203, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,5
channel = 3

[State 3203, Landing Dust Explod]
type = Explod
trigger1 = !Time
anim = 8102
sprpriority = -3
postype = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3203, Width: Edge]
type = Width
trigger1 = 1 
edge = 8,0

[State 3203, Hit] 
type = HitDef
trigger1 = !var(16) && var(15) < 13
trigger1 = AnimElem = 4
attr = C, HA
damage = ceil(ifElse(fvar(11) * 28 < 7, 7, fvar(11) * 28)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = M
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 10,10
guard.pausetime = 10,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 96), var(36) := -43
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -4.5, -6.5
air.velocity = -4.5, -6.5
guard.velocity = -8
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3203, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = AnimElemTime(5) >= 0
moveType = I

[State 3203, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;======================<MAX PHOENIX FANG ARROW>===================
[Statedef 3250]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3200
poweradd = ifelse(var(20) > 0, -1000, -2000)
sprpriority = 2

[State 3250, NotHitBy]
type = NotHitBy
trigger1 = Time < 65
time = 1
value = SCA

[State 3250, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3250, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3250, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3250, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3250, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3250, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3250, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-77
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3250, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3250, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3250, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3200, 0
channel = 0

[State 3250, Voice 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3200, 1
channel = 0

[State 3250, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1000, 7
channel = 1

[State 3250, No Push]
type = PlayerPush
trigger1 = AnimElemTime(3) >= 0
value = 0

[State 3250, VarSet: X Position Set]
type = VarSet
trigger1 = AnimElem = 3
fvar(15) = Pos X

[State 3250, VarSet: Y Position Set]
type = VarSet
trigger1 = AnimElem = 3
fvar(16) = Pos Y

[State 3250, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(3) >= 0
value = 1
movecamera = 0,0

[State 3250, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = 5.75
y = 5

[State 3250, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3250, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3250, Position Helper]
type = Helper
trigger1 = !Time
helperType = Normal
stateNo = 3291
ID = 3291
name = "Position"
posType = P1
pos = 0,0
ownpal = 1
facing = 1

[State 3250, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6154)
trigger1 = AnimElem = 3
helpertype = Normal
stateno = 6154
ID = 6154
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3250, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6155)
trigger1 = AnimElem = 3
helpertype = Normal
stateno = 6155
ID = 6155
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3250, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 4
trigger1 = var(14) < 4
trigger1 = AnimElem = 3 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,8
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = 0
air.velocity = -4, -6.5
guard.velocity = 0
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3250, End]
type = ChangeState
trigger1 = AnimElemTime(3) >= 0
trigger1 = (pos y-40)>-vel y
value = 3251

;MAX 2nd Rep
[Statedef 3251]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3201
poweradd = 0
sprpriority = 2

[State 3251, Posset: Teleport Back Up]
type = PosSet
trigger1 = !Time
x = ceil(fvar(15))
y = ceil(fvar(16))

[State 3251, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3251, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 6
channel = 2

[State 3251, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 7
channel = 1

[State 3251, No Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 3251, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3251, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 5.75
y = 5

[State 3251, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3251, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3251, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = AnimElem = 1
anim = 6220
ID = 6220
pos = 0,-70
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 65535
supermovetime = 65535

[State 3251, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6154)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6154
ID = 6154
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3251, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6155)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6155
ID = 6155
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3251, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 8
trigger1 = var(14) < 4
trigger1 = AnimElem = 2 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,8
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = 0
air.velocity = -4, -6.5
guard.velocity = 0
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3251, End]
type = ChangeState
trigger1 = AnimElemTime(2) >= 0
trigger1 = (pos y-40)>-vel y
value = 3252

;MAX 3rd Rep
[Statedef 3252]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3201
poweradd = 0
sprpriority = 2

[State 3252, Posset: Teleport Back Up]
type = PosSet
trigger1 = !Time
x = ceil(fvar(15))
y = ceil(fvar(16))

[State 3252, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3252, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 6
channel = 2

[State 3252, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 7
channel = 1

[State 3252, No Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 3252, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3252, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 5.75
y = 5

[State 3252, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3252, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3252, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = AnimElem = 1
anim = 6220
ID = 6220
pos = 0,-70
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 65535
supermovetime = 65535

[State 3252, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6154)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6154
ID = 6154
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3252, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6155)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6155
ID = 6155
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3252, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 12
trigger1 = var(14) < 4
trigger1 = AnimElem = 2 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,8
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = 0
air.velocity = -4, -6.5
guard.velocity = 0
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3252, End]
type = ChangeState
trigger1 = AnimElemTime(2) >= 0
trigger1 = (pos y-40)>-vel y
value = 3253

;MAX 4th Rep
[Statedef 3253]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3201
poweradd = 0
sprpriority = 2

[State 3253, Posset: Teleport Back Up]
type = PosSet
trigger1 = !Time
x = ceil(fvar(15))
y = ceil(fvar(16))

[State 3253, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3253, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 6
channel = 2

[State 3253, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 7
channel = 1

[State 3253, No Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 3253, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3253, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 5.75
y = 5

[State 3253, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3253, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3253, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = AnimElem = 1
anim = 6220
ID = 6220
pos = 0,-70
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 65535
supermovetime = 65535

[State 3253, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6154)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6154
ID = 6154
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3253, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6155)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6155
ID = 6155
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3253, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 16
trigger1 = var(14) < 4
trigger1 = AnimElem = 2 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,8
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = 0
air.velocity = -4, -6.5
guard.velocity = 0
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3253, End]
type = ChangeState
trigger1 = AnimElemTime(2) >= 0
trigger1 = (pos y-40)>-vel y
value = 3254

;MAX 5th Rep
[Statedef 3254]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3201
poweradd = 0
sprpriority = 2

[State 3254, Posset: Teleport Back Up]
type = PosSet
trigger1 = !Time
x = ceil(fvar(15))
y = ceil(fvar(16))

[State 3254, Width]
type = Width
trigger1 = 1
edge = 8,0

[State 3254, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 6
channel = 2

[State 3254, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3200, 2
channel = 0

[State 3254, Snd FX]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 7
channel = 1

[State 3254, Velocity]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 5.75
y = 5

[State 3254, VarSet: MoveContact Tracker]
type = VarSet
trigger1 = !Time
var(14) = 0

[State 3254, VarAdd: Add 1 On Contact]
type = VarAdd
trigger1 = MoveContact = 1
var(14) = 1

[State 3254, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = AnimElem = 1
anim = 6220
ID = 6220
pos = 0,-70
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 65535
supermovetime = 65535

[State 3254, Arrow FX 1]
type = Helper
trigger1 = !NumHelper(6154)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6154
ID = 6154
name = "Arrow"
pos = 0,0
postype = p1
ownpal = 1
size.xScale = 0.5
size.yScale = 0.5
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3254, Arrow FX 2]
type = Helper
trigger1 = !NumHelper(6155)
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
stateno = 6155
ID = 6155
name = "Arrow2"
pos = 0,0
postype = p1
ownpal = 1
;pausemovetime = 65535
;supermovetime = 65535
ignorehitpause = 1

[State 3254, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 20
trigger1 = var(14) < 4
trigger1 = AnimElem = 2 >= 0
attr = A, HA
damage = ceil(ifElse(fvar(11) * 12 < 7, 7, fvar(11) * 12)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 4,4
guard.pausetime = 4,4
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 9), var(36) := -55
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 28
ground.hittime  = 28
guard.hittime = 18
ground.velocity = -8
air.velocity = -4, -6.5
guard.velocity = -8
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3254, End]
type = ChangeState
trigger1 = AnimElemTime(2) >= 0
trigger1 = (pos y-40)>-vel y
value = 3255

;5th Rep Landing
[Statedef 3255]
type = C
movetype = A
physics = N
ctrl = 0
poweradd = 0
anim = 1425
;velset = 0, 0

[State 3255, On Ground]
type = Posset
trigger1 = !Time
y = 0

[State 3255, VelStop]
type = VelSet
trigger1 = !Time
y = 0

[State 3255, Velocity: When Turned]
type = VelMul
trigger1 = !Time
trigger1 = P2dist X < 0
x = -1

[State 3255, Friction]
type = VelMul
trigger1 = 1
x = .88

[State 3255, Turn]
type = Turn
trigger1 = !Time
trigger1 = P2dist X < 0

[State 3255, Land Snd]
type = PlaySnd
trigger1 = Time = 1
value = 52,0

[State 3255, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,5
channel = 3

[State 3255, Landing Dust Explod]
type = Explod
trigger1 = !Time
anim = 8102
sprpriority = -3
postype = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3255, Width: Edge]
type = Width
trigger1 = 1 
edge = 8,0

[State 3255, Hit] 
type = HitDef
trigger1 = !var(16) && var(15) < 21
trigger1 = AnimElem = 4
attr = C, HA
damage = ceil(ifElse(fvar(11) * 28 < 7, 7, fvar(11) * 28)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = M
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 10,10
guard.pausetime = 10,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 96), var(36) := -43
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -4.5, -6.5
air.velocity = -4.5, -6.5
guard.velocity = -8
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3255, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = AnimElemTime(5) >= 0
moveType = I

[State 3255, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;======================<SUPER PHOENIX INFINITY>===================
[Statedef 3300]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3300
poweradd = ifelse(var(20) > 0, -1000, -2000)
sprpriority = 2

[State 3300, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(30) < 0
time = 1
value = SCA

[State 3300, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3300, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3300, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3300, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3300, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3300, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3300, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-80
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3300, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3300, Width: Edge]
type = Width
trigger1 = 1
edge = 10,0

[State 3300, Width: Player]
type = Width
trigger1 = AnimElemTime(23) < 0
player = 8,0

[State 3300, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3300, StopSnd]
type = StopSnd
trigger1 = !Time
channel = 0

[State 3300, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3300, StateTypeSet: Air, No Phys]
type = StateTypeSet
trigger1 = AnimElemTime(2) >= 0
statetype = A
movetype = A
physics = N

[State 3300, Flame Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3300, 0
channel = 1

[State 3300, Energy Snd]
type = PlaySnd
trigger1 = AnimElem = 23
value = 1000, 1
channel = 2

[State 3300, Phoenix Snd]
type = PlaySnd
trigger1 = AnimElem = 34
value = 3300, 1

[State 3300, Rising Velocity]
type = VelSet
trigger1 = AnimElem = 23
y = -12.5

[State 3300, VelStop]
type = VelSet
trigger1 = AnimElemTime(34) = 0
x = 0
y = 0
persistent = 0

[State 3300, Diving Velocity]
type = VelSet
trigger1 = AnimElemTime(34) = 1
x = 10.35
y = 9.5
persistent = 0

[State 3300, Phoenix FX: Front]
type = Explod
trigger1 = !NumExplod(6240)
trigger1 = AnimElem = 2
anim = 6240
id = 6240
pos = 0, 0
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
removeongethit = 1

[State 3300, Phoenix FX: Behind]
type = Explod
trigger1 = !NumExplod(6242)
trigger1 = AnimElem = 2
anim = 6240
id = 6242
pos = 0, 0
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 3300, Sparkles]
type = Explod
trigger1 = AnimElemTime(23) >= 0 && AnimElemTime(30) < 0
anim = 1506
ID = 1506
pos = 0,0
postype = p1
facing = 1
vel = 0,0
accel = 0,0
random = 30,70
;supermovetime = 65535
;pausemovetime = 65535
scale = .5,.5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 3300, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 5
trigger1 = AnimElem = 2 || AnimElem = 4 || AnimElem = 6 || AnimElem = 8 || AnimElem = 10
attr = A, HA
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = M
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 2,12
guard.pausetime = 2,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 30), var(36) := -84
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -1, -3
guard.velocity = -10
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 35
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3300, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 10
trigger1 = AnimElem = 12 || AnimElem = 14 || AnimElem = 16 || AnimElem = 18 || AnimElem = 20 
attr = A, HA
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = M
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 2,12
guard.pausetime = 2,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 30), var(36) := -84
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -1, -3
guard.velocity = -10
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 35
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3300, Hits] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 22 || AnimElem = 24 || AnimElem = 26 
attr = A, HA
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = M
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 2,12
guard.pausetime = 2,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 30), var(36) := -84
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -5.85, -9.5
air.velocity = -5.85, -9.5
guard.velocity = -10
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 65
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3300, Final Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 34 
attr = A, HA
damage = ceil(ifElse(fvar(11) * 168 < 7, 7, fvar(11) * 168)), 12
priority = 4, hit
animtype = DiagUp
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 12,12
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 34), var(36) := -38
air.animtype = DiagUp
fall.animtype = DiagUp
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -10, -2.5
air.velocity = -10, -2.5
guard.velocity = -12
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 43
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3300, Flame Particles]
type = Helper
trigger1 = !NumHelper(8150)
trigger1 = MoveHit = 1 && NumTarget
trigger1 = !(Target, HitShakeOver)
trigger1 = var(40) := (Target, ID)
helperType = Normal
stateNo = 8150
ID = 8150
name = "Flame Particles"
posType = P2
ownPal = 1
ignoreHitPause = 1

[State 3300, End]
type = ChangeState
trigger1 = AnimElemTime(33) > 0
trigger1 = (pos y-8)>-vel y
value = 3305

;Infinity Landing
[Statedef 3305]
type = C
movetype = I
physics = C
ctrl = 0
anim = 3305
;velset = 0, 0

[State 3305, On Ground]
type = Posset
trigger1 = !Time
y = 0

[State 3305, VelStop]
type = VelSet
trigger1 = !Time
y = 0

[State 3305, Friction]
type = VelAdd
triggerall = vel x > 0
trigger1 = AnimElemTime(1) >= 0
x = -0.12

[State 3305, RemoveExplod: Phoenix FX: Front]
type = RemoveExplod
trigger1 = !Time
ID = 6240

[State 3305, RemoveExplod: Phoenix FX: Back]
type = RemoveExplod
trigger1 = !Time
ID = 6242

[State 3305, Phoenix Fade FX: Front]
type = Explod
trigger1 = !NumExplod(6241)
trigger1 = AnimElem = 1
anim = 6241
id = 6241
pos = 0, 0
scale = 0.5, 0.5
postype = p1
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1

[State 3305, Phoenix Fade FX: Behind]
type = Explod
trigger1 = !NumExplod(6243)
trigger1 = AnimElem = 1
anim = 6241
id = 6243
pos = 0, 0
scale = 0.5, 0.5
postype = p1
ownpal = 1
sprpriority = 1
bindtime = -1
removeongethit = 1

[State 3305, Land Snd]
type = PlaySnd
trigger1 = Time = 1
value = 52,0

[State 3305, Landing Dust Explod]
type = Explod
trigger1 = !Time
anim = 8102
sprpriority = -3
postype = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3305, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;======================<AIR SUPER PHOENIX INFINITY>===================
[Statedef 3350]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3300
poweradd = ifelse(var(20) > 0, -1000, -2000)
sprpriority = 2

[State 3350, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(30) < 0
time = 1
value = SCA

[State 3350, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3350, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3350, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3350, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3350, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3350, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3350, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8510
ID = 8500
name = "Superpause FX"
posType = P1
pos = -2,-80
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3350, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3350, Width: Edge]
type = Width
trigger1 = 1
edge = 10,0

[State 3350, Width: Player]
type = Width
trigger1 = AnimElemTime(23) < 0
player = 8,0

[State 3350, StopSnd]
type = StopSnd
trigger1 = !Time
channel = 0

[State 3350, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3350, Flame Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3300, 0
channel = 1

[State 3350, Energy Snd]
type = PlaySnd
trigger1 = AnimElem = 23
value = 1000, 1
channel = 2

[State 3350, Phoenix Snd]
type = PlaySnd
trigger1 = AnimElem = 34
value = 3300, 1

[State 3350, Rising Velocity]
type = VelSet
trigger1 = AnimElem = 23
y = -12.5

[State 3350, VelStop]
type = VelSet
trigger1 = AnimElemTime(34) = 0
x = 0
y = 0
persistent = 0

[State 3350, Diving Velocity]
type = VelSet
trigger1 = AnimElemTime(34) = 1
x = 10.35
y = 9.5
persistent = 0

[State 3350, Phoenix FX: Front]
type = Explod
trigger1 = !NumExplod(6240)
trigger1 = AnimElem = 2
anim = 6240
id = 6240
pos = 0, 0
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 3
bindtime = -1
removetime = -1
removeongethit = 1

[State 3350, Phoenix FX: Behind]
type = Explod
trigger1 = !NumExplod(6242)
trigger1 = AnimElem = 2
anim = 6240
id = 6242
pos = 0, 0
postype = p1
ownpal = 1
scale = 0.5, 0.5
sprpriority = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 3350, Sparkles]
type = Explod
trigger1 = AnimElemTime(23) >= 0 && AnimElemTime(30) < 0
anim = 1506
ID = 1506
pos = 0,0
postype = p1
facing = 1
vel = 0,0
accel = 0,0
random = 30,70
;supermovetime = 65535
;pausemovetime = 65535
scale = .5,.5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State 3350, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 5
trigger1 = AnimElem = 2 || AnimElem = 4 || AnimElem = 6 || AnimElem = 8 || AnimElem = 10
attr = A, HA
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = MA
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 2,12
guard.pausetime = 2,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 30), var(36) := -84
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -1, -3
guard.velocity = -10
airguard.velocity = -5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 35
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3350, Hits] 
type = HitDef
trigger1 = !var(16) && var(15) < 10
trigger1 = AnimElem = 12 || AnimElem = 14 || AnimElem = 16 || AnimElem = 18 || AnimElem = 20 
attr = A, HA
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = MA
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 2,12
guard.pausetime = 2,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 30), var(36) := -84
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -1, -3
guard.velocity = -10
airguard.velocity = -5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 35
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3350, Hits] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 22 || AnimElem = 24 || AnimElem = 26 
attr = A, HA
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 3
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 35, 35
guardflag = MA
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 2,12
guard.pausetime = 2,10
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 30), var(36) := -84
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -5.85, -11.5
air.velocity = -5.85, -9.5
guard.velocity = -10
airguard.velocity = -5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 65
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3350, Final Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 34 
attr = A, HA
damage = ceil(ifElse(fvar(11) * 168 < 7, 7, fvar(11) * 168)), 12
priority = 4, hit
animtype = DiagUp
getpower = 0, 0
givepower = 35, 35
guardflag = HA
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 12,12
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 34), var(36) := -38
air.animtype = DiagUp
fall.animtype = DiagUp
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -10, -2.5
air.velocity = -10, -2.5
guard.velocity = -12
airguard.velocity = -6.5, -1
airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 1
fall.recover = 0
forcestand = 1
palfx.time = 43
palfx.mul = 128,128,128
palfx.sinadd = 96,96,96,4
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3350, Flame Particles]
type = Helper
trigger1 = !NumHelper(8150)
trigger1 = MoveHit = 1 && NumTarget
trigger1 = !(Target, HitShakeOver)
trigger1 = var(40) := (Target, ID)
helperType = Normal
stateNo = 8150
ID = 8150
name = "Flame Particles"
posType = P2
ownPal = 1
ignoreHitPause = 1

[State 3350, End]
type = ChangeState
trigger1 = AnimElemTime(33) > 0
trigger1 = (pos y-8)>-vel y
value = 3305

;======================<NEO PSYCHO MEDLEY>===================
[Statedef 3400]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3400
poweradd = ifelse(var(20) > 0, -1000, -3000)
sprpriority = 2

[State 3400, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(7) < 0
time = 1
value = SCA

[State 3400, No Corner Push]
type = VarSet
trigger1 = Time = 3
fvar(5) = 0

[State 3400, Unguardable]
type = VarSet
trigger1 = Time = 3 && NumEnemy
trigger1 = (EnemyNear, StateNo != [120,155])
var(17) = 50

[State 3400, Super Cancel Flag]
type = VarSet
trigger1 = !Time
var(21) = (PrevStateNo = [1000,2999]) && var(6)

[State 3400, Hyper Cancel Flag]
type = VarSet
trigger1 = !Time
var(22) = (PrevStateNo = [3000,4999]) && var(7)

[State 3400, Super Cancel Flash]
type = PalFX
trigger1 = var(21) || var(22)
trigger1 = !(Time % 2) && Time <= 12
time = 1
add = 255,255,255
ignoreHitPause = 1

[State 3400, Super Cancel Juggle Reset]
type = VarSet
trigger1 = !Time
trigger1 = var(21) || var(22)
var(15) = 0
ignoreHitPause = 1

[State 3400, SuperPause FX]
type = Helper
trigger1 = Time = 3
helperType = Normal
stateNo = 8520
ID = 8500
name = "Superpause FX"
posType = P1
pos = 17,-104
superMoveTime = 255
size.xScale = 1
size.yScale = 1
ownPal = 1

[State 3400, SuperPause]
type = SuperPause
trigger1 = Time = 3
time = 50
moveTime = 50
p2DefMul = 1
unHittable = 1
anim = -1
sound = s8500,0
darken = 0
poweradd = 0

[State 3400, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3400, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3400, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3200, 0
channel = 0

[State 3400, Dash Snd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1000, 0

[State 3400, Dust Helper]
type = Helper
trigger1 = AnimElem = 6
helpertype = Normal
stateno = 8103
ID = 8100
name = "Dash Dust"
postype = p1
pausemovetime = 255
supermovetime = 255
ownpal = 1

[State 3400, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 2
channel = 1
persistent = 0

[State 3400, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 10

[State 3400, Velocity]
type = VelSet
trigger1 = AnimElemTime(6) = 14
x = 18.5

[State 3400, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 7

[State 3400, Friction]
type = VelMul
trigger1 = AnimElemTime(7) > 0 
x = 0.85

[State 3400, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3400, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "x" && MoveContact 
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
var(11) = 1
ignorehitpause = 1

[State 3400, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 6
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,2
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 27), var(36) := -74
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120
snap = 50,0

[State 3400, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(6) > 0 && AnimElemTime(7) < 0
value = 3402

[State 3400, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;Miss/Delayed Time End
[Statedef 3401]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3401
;velset = 0, 0

[State 3401, PosSet]
type = PosSet
trigger1 = !Time 
y = 0

[State 3401, VelSet]
type = VelSet
trigger1 = !Time 
y = 0

[State 3401, Friction]
type = VelMul
trigger1 = Vel x > 0
trigger1 = AnimElemTime(1) >= 0 
x = 0.85

[State 3401, Turn]
type = Turn
trigger1 = PrevStateNo = 3407
trigger1 = !Time
ignorehitpause = 1 

[State 3401, Thud Snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 5000,11

[State 3401, Voice]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5000,1
channel = 0

[State 3401, EnvShake]
type = EnvShake
trigger1 = AnimElem = 4 
time = 14
freq = 120
ampl = 4

[State 3401, Landing Dust Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 8102
sprpriority = -3
postype = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3401, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;1st Attack(Success)
[Statedef 3402]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3402
poweradd = 0
sprpriority = 2

[State 3402, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3402, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3402, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0

[State 3402, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 2
channel = 1

[State 3402, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3402, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "x" && MoveContact
trigger1 = AnimElemTime(2) >= 0
var(11) = 1
ignorehitpause = 1

[State 3402, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 2
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,2
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 54), var(36) := -70
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3402, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(2) > 0 && AnimElemTime(4) < 0
value = 3403

[State 3402, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;2nd Attack(Success)
[Statedef 3403]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3403
poweradd = 0
sprpriority = 2

[State 3403, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3403, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3403, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1
channel = 0

[State 3403, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 2
channel = 1

[State 3403, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3403, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "a" && MoveContact
trigger1 = AnimElemTime(2) >= 0
var(11) = 1
ignorehitpause = 1

[State 3403, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 2
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,2
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 66), var(36) := -69
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3403, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(2) > 0 && AnimElemTime(4) < 0
value = 3404

[State 3403, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;3rd Attack(Success)
[Statedef 3404]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3404
poweradd = 0
sprpriority = 2

[State 3404, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3404, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3404, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 3404, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 5
channel = 1

[State 3404, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3404, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "a" && MoveContact
trigger1 = AnimElemTime(5) >= 0
var(11) = 1
ignorehitpause = 1

[State 3404, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 5
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 75), var(36) := -58
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3404, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(7) < 0
value = 3405

[State 3404, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;4th Attack(Success)
[Statedef 3405]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3405
poweradd = 0
sprpriority = 2

[State 3405, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3405, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3405, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0
channel = 0

[State 3405, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 5
channel = 1

[State 3405, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3405, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "y" && MoveContact
trigger1 = AnimElemTime(2) >= 0
var(11) = 1
ignorehitpause = 1

[State 3405, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 2
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 72), var(36) := -82
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3405, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(2) > 0 && AnimElemTime(4) < 0
value = 3406

[State 3405, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;5th Attack(Success)
[Statedef 3406]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3406
poweradd = 0
sprpriority = 2

[State 3406, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3406, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3406, Voice]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 1
channel = 0

[State 3406, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1, 2
channel = 1

[State 3406, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3406, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "b" && MoveContact
trigger1 = AnimElemTime(6) >= 0
var(11) = 1
ignorehitpause = 1

[State 3406, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 6
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,2
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 89), var(36) := -57
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3406, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(6) > 0 && AnimElemTime(8) < 0
value = 3407

[State 3406, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;6th Attack(Success)
[Statedef 3407]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3407
poweradd = 0
sprpriority = 2

[State 3407, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3407, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3407, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
channel = 0

[State 3407, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 2
channel = 1

[State 3407, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3407, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "z" && MoveContact
trigger1 = AnimElemTime(4) >= 0
var(11) = 1
ignorehitpause = 1

[State 3407, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 4
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,2
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 36), var(36) := -72
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3407, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(4) > 0
value = 3408

[State 3407, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;7th Attack(Success)
[Statedef 3408]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3408
poweradd = 0
sprpriority = 2

[State 3408, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3408, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3408, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
channel = 0

[State 3408, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1, 5
channel = 1

[State 3408, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1 || AnimElem = 2 || AnimElem = 3
x = 4

[State 3408, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 2

[State 3408, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3408, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = Command = "c" && MoveContact
trigger1 = AnimElemTime(4) >= 0
var(11) = 1
ignorehitpause = 1

[State 3408, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 4
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 48), var(36) := -69
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3408, Next Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(4) > 0 && AnimElemTime(6) < 0
value = 3409

[State 3408, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;8th Attack(Success)
[Statedef 3409]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3409
poweradd = 0
sprpriority = 2

[State 3409, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3409, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3409, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 1
channel = 0

[State 3409, Swing Snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1, 5
channel = 1

[State 3409, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 10

[State 3409, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6 || AnimElem = 7
x = 4

[State 3409, Varset]
type = VarSet
trigger1 = !Time
var(11) = 0

[State 3409, Varset: Timing Detect]
type = VarSet
triggerall = !var(11)
triggerall = RoundState = 2
triggerall = Command = "Neo Healing" && MoveHit
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(7) < 0
var(11) = 1
ignorehitpause = 1

[State 3409, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 5
attr = S, HA
damage = ceil(ifElse(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,5
guardsound = S130,0
pausetime = 12,24
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 22), var(36) := -120
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3409, Final Attack]
type = ChangeState
triggerall = var(11)
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(7) < 0
value = 3410

[State 3409, End(Miss)]
type = ChangeState
trigger1 = !AnimTime
value = 3401

;Neo Finishing Combo
[Statedef 3410]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3410
poweradd = 0
sprpriority = 2

[State 3410, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 3410, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

;[State 3410, Voice]
;type = PlaySnd
;trigger1 = AnimElem = 3
;value = 0, 1
;channel = 0

[State 3410, Swing Snd: Sword]
type = PlaySnd
trigger1 = AnimElem = 14
value = 1, 6
channel = 1

[State 3410, Swing Snd: Double Palms]
type = PlaySnd
trigger1 = AnimElem = 26
value = 1, 2
channel = 1

[State 3410, Swing Snd: Sailor Psycho Sword?]
type = PlaySnd
trigger1 = AnimElem = 32
value = 1000, 1
channel = 1

[State 3410, Portal Snd FX]
type = PlaySnd
trigger1 = AnimElem = 1 || AnimElem = 22 || AnimElem = 30
value = 1000, 6

[State 3410, Portal FX]
type = Explod
triggerall = !NumExplod(6220)
trigger1 = AnimElem = 22
trigger2 = AnimElem = 30
anim = 6220
ID = 6220
pos = 0,-62
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
;pausemovetime = 65535
;supermovetime = 65535

[State 3411, Sailor Sword FX]
type = Explod
trigger1 = !NumExplod(3415)
trigger1 = AnimElem = 31
anim = 3415
ID = 3415
pos = -15,-25
postype = p1
ownpal = 1
scale = 0.5, 0.5
bindtime = -1
removetime = -1
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
;pausemovetime = 65535
;supermovetime = 65535

[State 3410, StateTypeSet: Air, No Phys]
type = StateTypeSet
trigger1 = AnimElemTime(35) >= 0
statetype = A
movetype = A
physics = N

[State 3410, Rising Velocity]
type = VelSet
trigger1 = AnimElem = 35
x = 1.6
y = -8.5

[State 3410, Friction]
type = VelMul
trigger1 = AnimElemTime(35) > 0 
x = .85

[State 3410, Gravity]
type = VelAdd
trigger1 = AnimElemTime(35) > 0 
y = 0.3125

[State 3410, Hit 1] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 15
attr = S, HA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 15, 15
guardflag = M
hitflag = MAF
hitsound = S2,10
guardsound = S130,0
pausetime = 4,12
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8017)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 48), var(36) := -32
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120
kill = 0 

[State 3410, Hit 2] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 17
attr = S, HA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 15, 15
guardflag = M
hitflag = MAF
hitsound = S2,10
guardsound = S130,0
pausetime = 12,40
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8017)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 64), var(36) := -120
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120
kill = 0

[State 3410, Hit 3] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 27
attr = S, HA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 15, 15
guardflag = M
hitflag = MAF
hitsound = S2,2
guardsound = S130,0
pausetime = 12,40
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 48), var(36) := -57
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120
kill = 0

[State 3410, Hit 4] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 34
attr = S, HA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 15, 15
guardflag = M
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 42,42
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 26), var(36) := -28
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = 0
air.velocity = -4.5, -6.5
guard.velocity = -1
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 0
air.fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120
kill = 0

[State 3410, Hits 5-6] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 35 || AnimElem = 36
attr = A, HA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 4
priority = 4, hit
animtype = Hard
getpower = 0, 0
givepower = 15, 15
guardflag = M
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 4,12
guard.pausetime = 6,6
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 22), var(36) := -102
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -2, -12
air.velocity = -2, -12
guard.velocity = -12
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .5
fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120
kill = 0

[State 3410, RemoveExplod: Sailor Sword FX]
type = RemoveExplod
trigger1 = AnimElem = 35
id = 3415

[State 3410, End]
type = ChangeState
trigger1 = !AnimTime
value = 3411

;TOTAL HEAL!!!
[Statedef 3411]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3411
poweradd = 0
sprpriority = 2

[State 3411, Width: Edge]
type = Width
trigger1 = 1
edge = 8,0

[State 3411, Portal Snd FX]
type = PlaySnd
trigger1 = !Time
value = 1000, 6

[State 3411, Portal FX]
type = Explod
trigger1 = !NumExplod(6220)
trigger1 = !Time
anim = 6220
ID = 6220
pos = 0,-65
postype = p1
ownpal = 1
scale = 0.5, 0.5
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
;pausemovetime = 65535
;supermovetime = 65535

[State 3411, Healing Ring FX]
type = Explod
trigger1 = !NumExplod(3416)
trigger1 = AnimElemTime(2) = 0
anim = 3416
ID = 3416
pos = -6,-20
postype = p1
ownpal = 1
scale = 0.5, 0.5
bindtime = -1
removetime = -1
ignorehitpause = 1
sprpriority = 4
removeongethit = 1
pausemovetime = 255
supermovetime = 255

;[State 3411, Voice]
;type = PlaySnd
;trigger1 = AnimElem = 2
;value = 0, 1
;channel = 0

[State 3411, Heal Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000, 8

[State 3411, Healing]
type = LifeAdd
trigger1 = Life <= 470
trigger1 = AnimElem = 2
value = 200

[State 3411, Gravity]
type = VelAdd
trigger1 = AnimElemTime(8) >= 0
y = 0.48

[State 3411, Hit] 
type = HitDef
;trigger1 = !var(16) && var(15) < 1
trigger1 = AnimElem = 2
attr = A, HA
damage = ceil(ifElse(fvar(11) * 104 < 7, 7, fvar(11) * 104)), 12
ID = 3411
priority = 4, hit
animtype = Up
getpower = 0, 0
givepower = 30, 30
guardflag = M
hitflag = MAF
hitsound = S2,6
guardsound = S130,0
pausetime = 12,14
guard.pausetime = 12,12
sparkNo = -1 + 0 * (var(33) := 8014)
guard.sparkNo = -1 + 0 * (var(34) := 8001)
sparkXY = -10 + 0 * (var(35) := 23), var(36) := -76
air.animtype = Up
fall.animtype = Up
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.hittime = 18
ground.velocity = -5, -7
air.velocity = -4.5, -7
guard.velocity = -12
;airguard.velocity = -6.5, -1
;airguard.ctrlTime = 16
ground.cornerPush.velOff = 0
guard.cornerPush.velOff = 0
air.cornerPush.velOff = 0
yaccel = .48
fall = 1
fall.recover = 0
forcestand = 1
palFX.time = 12 * var(9)
palFX.add = 255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time = 18
envshake.ampl = 6
envShake.freq = 120

[State 3411, TargetState];causes foe to flip through the air
type = TargetState
trigger1= MoveHit && NumTarget(3411)
trigger1= (Target(3411),StateNo=5000) || (Target(3411),StateNo=5010) || (Target(3411),StateNo=5020)
value= 1111150
ID= 3411
ignorehitpause= 1

[State 3411, RemoveExplod: Energy Ring FX]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 3416

[State 3411, End]
type = ChangeState
trigger1 = AnimElemTime(8) >= 0
trigger1 = pos y > -vel y
value = 3412

;Healing Land
[Statedef 3412]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1105
velset = 0, 0

[State 3412, On Ground]
type = Posset
trigger1 = !Time
y = 0

[State 3412, Land Snd]
type = PlaySnd
trigger1 = Time = 1
value = 52,0

[State 3412, Landing Dust Explod]
type = Explod
trigger1 = !Time
anim = 8102
sprpriority = -3
postype = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3412, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;Targetstate: hit by TOTAL HEAL!!!
[Statedef 1111150]
type=A
movetype=H
physics=N
velset=0,0
anim=5030

[State 1111150, PosAdd]
type=posadd
trigger1= !time
y=const(size.mid.pos.y)

[State 1111150, Target Anim: Flipping]
type=changeanim2
trigger1= !time
value=1111150

[State 1111150, Velocity]
type=hitvelset
trigger1= !time
x=1
y=1

[State 1111150, Gravity]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 1111150, ScreenBound]
type=screenbound
trigger1= 1
value=1
movecamera=1,0

[State 1111150, End]
type=selfstate
trigger1= vel y>0 && pos y>=-5
value=5100